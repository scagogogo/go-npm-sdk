import{_ as n,c as a,o as l,ae as p}from"./chunks/framework.BXQRUG6O.js";const y=JSON.parse('{"title":"Utils Package API","description":"","frontmatter":{},"headers":[],"relativePath":"en/api/utils.md","filePath":"en/api/utils.md","lastUpdated":null}'),o={name:"en/api/utils.md"};function e(t,s,r,c,D,F){return l(),a("div",null,s[0]||(s[0]=[p(`<h1 id="utils-package-api" tabindex="-1">Utils Package API <a class="header-anchor" href="#utils-package-api" aria-label="Permalink to &quot;Utils Package API&quot;">​</a></h1><p>The <code>pkg/utils</code> package provides utility functions for command execution with advanced features like timeout control, streaming output, and batch operations.</p><h2 id="executor" tabindex="-1">Executor <a class="header-anchor" href="#executor" aria-label="Permalink to &quot;Executor&quot;">​</a></h2><p>The executor component provides flexible command execution capabilities with support for various execution modes and advanced features.</p><h3 id="newexecutor" tabindex="-1">NewExecutor <a class="header-anchor" href="#newexecutor" aria-label="Permalink to &quot;NewExecutor&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#82AAFF;"> NewExecutor</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> *</span><span style="color:#FFCB6B;">Executor</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Creates a new command executor with default configuration.</p><p><strong>Example:</strong></p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">executor </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewExecutor</span><span style="color:#89DDFF;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="basic-execution" tabindex="-1">Basic Execution <a class="header-anchor" href="#basic-execution" aria-label="Permalink to &quot;Basic Execution&quot;">​</a></h2><h3 id="executesimple" tabindex="-1">ExecuteSimple <a class="header-anchor" href="#executesimple" aria-label="Permalink to &quot;ExecuteSimple&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">e </span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">Executor</span><span style="color:#89DDFF;">)</span><span style="color:#82AAFF;"> ExecuteSimple</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">ctx</span><span style="color:#FFCB6B;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> command</span><span style="color:#C792EA;"> string</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> args</span><span style="color:#89DDFF;"> ...</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> (*</span><span style="color:#FFCB6B;">ExecuteResult</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;"> error</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Executes a command with basic configuration and returns the result.</p><p><strong>Parameters:</strong></p><ul><li><code>ctx</code> (context.Context): Context for cancellation and timeout</li><li><code>command</code> (string): Command to execute</li><li><code>args</code> (...string): Command arguments</li></ul><p><strong>Returns:</strong></p><ul><li><code>*ExecuteResult</code>: Execution result</li><li><code>error</code>: Error if execution fails</li></ul><p><strong>Example:</strong></p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">ctx </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Background</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ExecuteSimple</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">--version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;"> nil</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">npm version: </span><span style="color:#F07178;">%s</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> strings</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">TrimSpace</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Stdout</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#BABED8;">fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Exit code: </span><span style="color:#F07178;">%d</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ExitCode</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Duration: </span><span style="color:#F07178;">%v</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Duration</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="executewithinput" tabindex="-1">ExecuteWithInput <a class="header-anchor" href="#executewithinput" aria-label="Permalink to &quot;ExecuteWithInput&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">e </span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">Executor</span><span style="color:#89DDFF;">)</span><span style="color:#82AAFF;"> ExecuteWithInput</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">ctx</span><span style="color:#FFCB6B;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> input</span><span style="color:#C792EA;"> string</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> command</span><span style="color:#C792EA;"> string</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> args</span><span style="color:#89DDFF;"> ...</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> (*</span><span style="color:#FFCB6B;">ExecuteResult</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;"> error</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Executes a command with input data provided to stdin.</p><p><strong>Parameters:</strong></p><ul><li><code>ctx</code> (context.Context): Context for cancellation and timeout</li><li><code>input</code> (string): Input data to send to command&#39;s stdin</li><li><code>command</code> (string): Command to execute</li><li><code>args</code> (...string): Command arguments</li></ul><p><strong>Example:</strong></p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">ctx </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Background</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">input </span><span style="color:#89DDFF;">:=</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">console.log(&#39;Hello, World!&#39;);</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ExecuteWithInput</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> input</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">-e</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">-</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;"> nil</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Output: </span><span style="color:#F07178;">%s</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Stdout</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="advanced-execution" tabindex="-1">Advanced Execution <a class="header-anchor" href="#advanced-execution" aria-label="Permalink to &quot;Advanced Execution&quot;">​</a></h2><h3 id="execute" tabindex="-1">Execute <a class="header-anchor" href="#execute" aria-label="Permalink to &quot;Execute&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">e </span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">Executor</span><span style="color:#89DDFF;">)</span><span style="color:#82AAFF;"> Execute</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">ctx</span><span style="color:#FFCB6B;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> options</span><span style="color:#FFCB6B;"> ExecuteOptions</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> (*</span><span style="color:#FFCB6B;">ExecuteResult</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;"> error</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Executes a command with advanced configuration options.</p><p><strong>Parameters:</strong></p><ul><li><code>ctx</code> (context.Context): Context for cancellation and timeout</li><li><code>options</code> (ExecuteOptions): Execution configuration</li></ul><p><strong>Returns:</strong></p><ul><li><code>*ExecuteResult</code>: Execution result</li><li><code>error</code>: Error if execution fails</li></ul><h3 id="executeoptions" tabindex="-1">ExecuteOptions <a class="header-anchor" href="#executeoptions" aria-label="Permalink to &quot;ExecuteOptions&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#FFCB6B;"> ExecuteOptions</span><span style="color:#89DDFF;"> struct</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    Command       </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">            \`</span><span style="color:#C3E88D;">json:&quot;command&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Args          </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">          \`</span><span style="color:#C3E88D;">json:&quot;args,omitempty&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    WorkingDir    </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">            \`</span><span style="color:#C3E88D;">json:&quot;working_dir,omitempty&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Env           </span><span style="color:#89DDFF;">map[</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;"> \`</span><span style="color:#C3E88D;">json:&quot;env,omitempty&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Timeout       </span><span style="color:#FFCB6B;">time</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Duration</span><span style="color:#89DDFF;">     \`</span><span style="color:#C3E88D;">json:&quot;timeout,omitempty&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Input         </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">            \`</span><span style="color:#C3E88D;">json:&quot;input,omitempty&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    CaptureOutput </span><span style="color:#C792EA;">bool</span><span style="color:#89DDFF;">              \`</span><span style="color:#C3E88D;">json:&quot;capture_output&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    StreamOutput  </span><span style="color:#C792EA;">bool</span><span style="color:#89DDFF;">              \`</span><span style="color:#C3E88D;">json:&quot;stream_output&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    OutputCallback </span><span style="color:#89DDFF;">func(</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;">     \`</span><span style="color:#C3E88D;">json:&quot;-&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>Example:</strong></p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">ctx </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Background</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">options </span><span style="color:#89DDFF;">:=</span><span style="color:#FFCB6B;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">ExecuteOptions</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    Command</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">       &quot;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    Args</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">          []</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">install</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">    WorkingDir</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">/path/to/project</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    Timeout</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">       5</span><span style="color:#89DDFF;"> *</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Minute</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    CaptureOutput</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    StreamOutput</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">  true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    Env</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> map[</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">NODE_ENV</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">development</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#BABED8;">    OutputCallback</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> func(</span><span style="color:#BABED8;font-style:italic;">output</span><span style="color:#C792EA;"> string</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">npm: </span><span style="color:#F07178;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> output</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Execute</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> options</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;"> nil</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Success </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Package installed successfully</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Installation failed: </span><span style="color:#F07178;">%s</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Stderr</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="streaming-execution" tabindex="-1">Streaming Execution <a class="header-anchor" href="#streaming-execution" aria-label="Permalink to &quot;Streaming Execution&quot;">​</a></h2><h3 id="executestream" tabindex="-1">ExecuteStream <a class="header-anchor" href="#executestream" aria-label="Permalink to &quot;ExecuteStream&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">e </span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">Executor</span><span style="color:#89DDFF;">)</span><span style="color:#82AAFF;"> ExecuteStream</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">ctx</span><span style="color:#FFCB6B;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> callback</span><span style="color:#89DDFF;"> func(</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">),</span><span style="color:#BABED8;font-style:italic;"> command</span><span style="color:#C792EA;"> string</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> args</span><span style="color:#89DDFF;"> ...</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> (*</span><span style="color:#FFCB6B;">ExecuteResult</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;"> error</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Executes a command with real-time output streaming.</p><p><strong>Parameters:</strong></p><ul><li><code>ctx</code> (context.Context): Context for cancellation and timeout</li><li><code>callback</code> (func(string)): Function called for each line of output</li><li><code>command</code> (string): Command to execute</li><li><code>args</code> (...string): Command arguments</li></ul><p><strong>Example:</strong></p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">ctx </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Background</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">callback </span><span style="color:#89DDFF;">:=</span><span style="color:#89DDFF;"> func(</span><span style="color:#BABED8;font-style:italic;">output</span><span style="color:#C792EA;"> string</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Real-time output: </span><span style="color:#F07178;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> output</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ExecuteStream</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> callback</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">install</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">--verbose</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;"> nil</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Command completed with exit code: </span><span style="color:#F07178;">%d</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ExitCode</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="execution-results" tabindex="-1">Execution Results <a class="header-anchor" href="#execution-results" aria-label="Permalink to &quot;Execution Results&quot;">​</a></h2><h3 id="executeresult" tabindex="-1">ExecuteResult <a class="header-anchor" href="#executeresult" aria-label="Permalink to &quot;ExecuteResult&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#FFCB6B;"> ExecuteResult</span><span style="color:#89DDFF;"> struct</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    Success   </span><span style="color:#C792EA;">bool</span><span style="color:#89DDFF;">          \`</span><span style="color:#C3E88D;">json:&quot;success&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    ExitCode  </span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">           \`</span><span style="color:#C3E88D;">json:&quot;exit_code&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Stdout    </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">        \`</span><span style="color:#C3E88D;">json:&quot;stdout,omitempty&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Stderr    </span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">        \`</span><span style="color:#C3E88D;">json:&quot;stderr,omitempty&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Duration  </span><span style="color:#FFCB6B;">time</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Duration</span><span style="color:#89DDFF;"> \`</span><span style="color:#C3E88D;">json:&quot;duration&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Cancelled </span><span style="color:#C792EA;">bool</span><span style="color:#89DDFF;">          \`</span><span style="color:#C3E88D;">json:&quot;cancelled&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Error     </span><span style="color:#C792EA;">error</span><span style="color:#89DDFF;">         \`</span><span style="color:#C3E88D;">json:&quot;-&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Fields:</strong></p><ul><li><code>Success</code>: Whether the command executed successfully (exit code 0)</li><li><code>ExitCode</code>: Command exit code</li><li><code>Stdout</code>: Standard output content</li><li><code>Stderr</code>: Standard error content</li><li><code>Duration</code>: Execution duration</li><li><code>Cancelled</code>: Whether execution was cancelled</li><li><code>Error</code>: Execution error (if any)</li></ul><h2 id="batch-execution" tabindex="-1">Batch Execution <a class="header-anchor" href="#batch-execution" aria-label="Permalink to &quot;Batch Execution&quot;">​</a></h2><h3 id="newbatchexecutor" tabindex="-1">NewBatchExecutor <a class="header-anchor" href="#newbatchexecutor" aria-label="Permalink to &quot;NewBatchExecutor&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#82AAFF;"> NewBatchExecutor</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">maxConcurrency</span><span style="color:#C792EA;"> int</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> *</span><span style="color:#FFCB6B;">BatchExecutor</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Creates a new batch executor with specified maximum concurrency.</p><p><strong>Parameters:</strong></p><ul><li><code>maxConcurrency</code> (int): Maximum number of concurrent executions</li></ul><h3 id="executebatch" tabindex="-1">ExecuteBatch <a class="header-anchor" href="#executebatch" aria-label="Permalink to &quot;ExecuteBatch&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">be </span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">BatchExecutor</span><span style="color:#89DDFF;">)</span><span style="color:#82AAFF;"> ExecuteBatch</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">ctx</span><span style="color:#FFCB6B;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Context</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> options</span><span style="color:#FFCB6B;"> BatchOptions</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> (*</span><span style="color:#FFCB6B;">BatchResult</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;"> error</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Executes multiple commands concurrently with specified options.</p><p><strong>Parameters:</strong></p><ul><li><code>ctx</code> (context.Context): Context for cancellation and timeout</li><li><code>options</code> (BatchOptions): Batch execution configuration</li></ul><h3 id="batchoptions" tabindex="-1">BatchOptions <a class="header-anchor" href="#batchoptions" aria-label="Permalink to &quot;BatchOptions&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#FFCB6B;"> BatchOptions</span><span style="color:#89DDFF;"> struct</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    Commands       </span><span style="color:#89DDFF;">[]</span><span style="color:#FFCB6B;">ExecuteOptions</span><span style="color:#89DDFF;"> \`</span><span style="color:#C3E88D;">json:&quot;commands&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    StopOnError    </span><span style="color:#C792EA;">bool</span><span style="color:#89DDFF;">             \`</span><span style="color:#C3E88D;">json:&quot;stop_on_error&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    MaxConcurrency </span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">              \`</span><span style="color:#C3E88D;">json:&quot;max_concurrency,omitempty&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="batchresult" tabindex="-1">BatchResult <a class="header-anchor" href="#batchresult" aria-label="Permalink to &quot;BatchResult&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">type</span><span style="color:#FFCB6B;"> BatchResult</span><span style="color:#89DDFF;"> struct</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    Results     </span><span style="color:#89DDFF;">[]*</span><span style="color:#FFCB6B;">ExecuteResult</span><span style="color:#89DDFF;"> \`</span><span style="color:#C3E88D;">json:&quot;results&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    Success     </span><span style="color:#C792EA;">bool</span><span style="color:#89DDFF;">             \`</span><span style="color:#C3E88D;">json:&quot;success&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    TotalTime   </span><span style="color:#FFCB6B;">time</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Duration</span><span style="color:#89DDFF;">    \`</span><span style="color:#C3E88D;">json:&quot;total_time&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#BABED8;">    FailedCount </span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">              \`</span><span style="color:#C3E88D;">json:&quot;failed_count&quot;</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>Example:</strong></p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">batchExecutor </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewBatchExecutor</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">ctx </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Background</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">commands </span><span style="color:#89DDFF;">:=</span><span style="color:#89DDFF;"> []</span><span style="color:#FFCB6B;">utils</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">ExecuteOptions</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#BABED8;">        Command</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">       &quot;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        Args</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">          []</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">install</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">lodash</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">        WorkingDir</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">/project1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        CaptureOutput</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#BABED8;">        Command</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">       &quot;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        Args</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">          []</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">install</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">axios</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">        WorkingDir</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">/project2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        CaptureOutput</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">    {</span></span>
<span class="line"><span style="color:#BABED8;">        Command</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">       &quot;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        Args</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">          []</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">        WorkingDir</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">/project3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        CaptureOutput</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    },</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">options </span><span style="color:#89DDFF;">:=</span><span style="color:#FFCB6B;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">BatchOptions</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    Commands</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;">       commands</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    StopOnError</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">    false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    MaxConcurrency</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;"> 2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> batchExecutor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ExecuteBatch</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> options</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;"> nil</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Batch execution completed in </span><span style="color:#F07178;">%v</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">TotalTime</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Success: </span><span style="color:#F07178;">%v</span><span style="color:#C3E88D;">, Failed: </span><span style="color:#F07178;">%d</span><span style="color:#C3E88D;">/</span><span style="color:#F07178;">%d</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Success</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">FailedCount</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Results</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#BABED8;"> i</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> res </span><span style="color:#89DDFF;">:=</span><span style="color:#89DDFF;font-style:italic;"> range</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Results </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> res</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Success </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Command </span><span style="color:#F07178;">%d</span><span style="color:#C3E88D;">: SUCCESS</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> i</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Command </span><span style="color:#F07178;">%d</span><span style="color:#C3E88D;">: FAILED (exit code: </span><span style="color:#F07178;">%d</span><span style="color:#C3E88D;">)</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> i</span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> res</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ExitCode</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><h3 id="setdefaulttimeout" tabindex="-1">SetDefaultTimeout <a class="header-anchor" href="#setdefaulttimeout" aria-label="Permalink to &quot;SetDefaultTimeout&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">e </span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">Executor</span><span style="color:#89DDFF;">)</span><span style="color:#82AAFF;"> SetDefaultTimeout</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">timeout</span><span style="color:#FFCB6B;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Duration</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Sets the default timeout for command execution.</p><h3 id="setdefaultworkingdir" tabindex="-1">SetDefaultWorkingDir <a class="header-anchor" href="#setdefaultworkingdir" aria-label="Permalink to &quot;SetDefaultWorkingDir&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">e </span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">Executor</span><span style="color:#89DDFF;">)</span><span style="color:#82AAFF;"> SetDefaultWorkingDir</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">dir</span><span style="color:#C792EA;"> string</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Sets the default working directory for command execution.</p><h3 id="setdefaultenv" tabindex="-1">SetDefaultEnv <a class="header-anchor" href="#setdefaultenv" aria-label="Permalink to &quot;SetDefaultEnv&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">e </span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">Executor</span><span style="color:#89DDFF;">)</span><span style="color:#82AAFF;"> SetDefaultEnv</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">env</span><span style="color:#89DDFF;"> map[</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Sets the default environment variables for command execution.</p><p><strong>Example:</strong></p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">executor </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewExecutor</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Configure defaults</span></span>
<span class="line"><span style="color:#BABED8;">executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">SetDefaultTimeout</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;"> *</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Second</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">SetDefaultWorkingDir</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/home/user/projects</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">SetDefaultEnv</span><span style="color:#89DDFF;">(map[</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">NODE_ENV</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">production</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">PATH</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">     &quot;</span><span style="color:#C3E88D;">/usr/local/bin:/usr/bin:/bin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// These defaults will be used when not specified in ExecuteOptions</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="process-management" tabindex="-1">Process Management <a class="header-anchor" href="#process-management" aria-label="Permalink to &quot;Process Management&quot;">​</a></h2><h3 id="killprocess" tabindex="-1">KillProcess <a class="header-anchor" href="#killprocess" aria-label="Permalink to &quot;KillProcess&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">func</span><span style="color:#89DDFF;"> (</span><span style="color:#BABED8;font-style:italic;">e </span><span style="color:#89DDFF;">*</span><span style="color:#FFCB6B;">Executor</span><span style="color:#89DDFF;">)</span><span style="color:#82AAFF;"> KillProcess</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">cmd</span><span style="color:#89DDFF;"> *</span><span style="color:#FFCB6B;">exec</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Cmd</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;"> error</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Kills a running process.</p><p><strong>Parameters:</strong></p><ul><li><code>cmd</code> (*exec.Cmd): Command process to kill</li></ul><p><strong>Example:</strong></p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// This is typically used internally, but can be called manually if needed</span></span>
<span class="line"><span style="color:#BABED8;">err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">KillProcess</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">cmd</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;"> nil</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Failed to kill process: </span><span style="color:#F07178;">%v</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="error-handling" tabindex="-1">Error Handling <a class="header-anchor" href="#error-handling" aria-label="Permalink to &quot;Error Handling&quot;">​</a></h2><p>The utils package provides specific error constants:</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">var</span><span style="color:#89DDFF;"> (</span></span>
<span class="line"><span style="color:#BABED8;">    ErrCommandTimeout  </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">command execution timeout</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    ErrCommandFailed   </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">command execution failed</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    ErrInvalidCommand  </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">New</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">invalid command</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Example:</strong></p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">result</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ExecuteSimple</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">invalid-command</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;"> nil</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Is</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">err</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ErrCommandTimeout</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Command timed out</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;font-style:italic;"> if</span><span style="color:#BABED8;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Is</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">err</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ErrCommandFailed</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Command failed</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;font-style:italic;"> if</span><span style="color:#BABED8;"> errors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Is</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">err</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">ErrInvalidCommand</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Invalid command</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Other error: </span><span style="color:#F07178;">%v</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><ol><li><strong>Use contexts</strong>: Always pass appropriate contexts for timeout and cancellation control</li><li><strong>Handle timeouts</strong>: Set reasonable timeouts for long-running commands</li><li><strong>Stream output</strong>: Use streaming for commands with significant output</li><li><strong>Batch operations</strong>: Use batch executor for multiple related commands</li><li><strong>Error handling</strong>: Check specific error types for better error handling</li><li><strong>Working directories</strong>: Set appropriate working directories for project-specific commands</li><li><strong>Environment variables</strong>: Configure environment variables as needed</li><li><strong>Resource cleanup</strong>: Ensure proper cleanup of resources and processes</li></ol><h2 id="integration-example" tabindex="-1">Integration Example <a class="header-anchor" href="#integration-example" aria-label="Permalink to &quot;Integration Example&quot;">​</a></h2><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">package</span><span style="color:#FFCB6B;"> main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> (</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">context</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">log</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">time</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">github.com/scagogogo/go-npm-sdk/pkg/utils</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#82AAFF;"> main</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">    executor </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewExecutor</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    ctx</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> cancel </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">WithTimeout</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Background</span><span style="color:#89DDFF;">(),</span><span style="color:#F78C6C;"> 5</span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;">time</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Minute</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    defer</span><span style="color:#82AAFF;"> cancel</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // Configure executor</span></span>
<span class="line"><span style="color:#BABED8;">    executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">SetDefaultTimeout</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;"> *</span><span style="color:#BABED8;"> time</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Second</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">SetDefaultWorkingDir</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/path/to/project</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    // Execute npm install with streaming output</span></span>
<span class="line"><span style="color:#BABED8;">    options </span><span style="color:#89DDFF;">:=</span><span style="color:#FFCB6B;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">ExecuteOptions</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        Command</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">       &quot;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        Args</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">          []</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">install</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">        CaptureOutput</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        StreamOutput</span><span style="color:#89DDFF;">:</span><span style="color:#FF9CAC;">  true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">        OutputCallback</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> func(</span><span style="color:#BABED8;font-style:italic;">output</span><span style="color:#C792EA;"> string</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">            fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">npm: </span><span style="color:#F07178;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> output</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">        },</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#BABED8;">    result</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Execute</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> options</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">!=</span><span style="color:#89DDFF;"> nil</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">        log</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fatal</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">err</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Success </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Installation completed in </span><span style="color:#F07178;">%v</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Duration</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span><span style="color:#89DDFF;font-style:italic;"> else</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#BABED8;">        fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Installation failed: </span><span style="color:#F07178;">%s</span><span style="color:#BABED8;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Stderr</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div>`,97)]))}const u=n(o,[["render",e]]);export{y as __pageData,u as default};
