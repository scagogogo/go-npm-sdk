import{_ as a,c as n,o as l,ae as p}from"./chunks/framework.BXQRUG6O.js";const y=JSON.parse('{"title":"配置","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/configuration.md","filePath":"zh/guide/configuration.md","lastUpdated":null}'),e={name:"zh/guide/configuration.md"};function o(t,s,r,c,i,D){return l(),n("div",null,s[0]||(s[0]=[p(`<h1 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h1><p>了解如何根据您的特定需求配置Go NPM SDK。</p><h2 id="基本配置" tabindex="-1">基本配置 <a class="header-anchor" href="#基本配置" aria-label="Permalink to &quot;基本配置&quot;">​</a></h2><h3 id="客户端配置" tabindex="-1">客户端配置 <a class="header-anchor" href="#客户端配置" aria-label="Permalink to &quot;客户端配置&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 使用默认配置创建客户端</span></span>
<span class="line"><span style="color:#BABED8;">client</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> npm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewClient</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 使用特定npm路径创建客户端</span></span>
<span class="line"><span style="color:#BABED8;">client</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> npm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewClientWithPath</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/usr/local/bin/npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="工作目录" tabindex="-1">工作目录 <a class="header-anchor" href="#工作目录" aria-label="Permalink to &quot;工作目录&quot;">​</a></h3><p>为npm操作设置工作目录：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">options </span><span style="color:#89DDFF;">:=</span><span style="color:#FFCB6B;"> npm</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">InstallOptions</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    WorkingDir</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">/path/to/project</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">InstallPackage</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">express</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> options</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="注册表配置" tabindex="-1">注册表配置 <a class="header-anchor" href="#注册表配置" aria-label="Permalink to &quot;注册表配置&quot;">​</a></h3><p>配置自定义npm注册表：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">options </span><span style="color:#89DDFF;">:=</span><span style="color:#FFCB6B;"> npm</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">InstallOptions</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    Registry</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">https://registry.npmjs.org/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">InstallPackage</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">package</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> options</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="高级配置" tabindex="-1">高级配置 <a class="header-anchor" href="#高级配置" aria-label="Permalink to &quot;高级配置&quot;">​</a></h2><h3 id="超时配置" tabindex="-1">超时配置 <a class="header-anchor" href="#超时配置" aria-label="Permalink to &quot;超时配置&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> cancel </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">WithTimeout</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">context</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Background</span><span style="color:#89DDFF;">(),</span><span style="color:#F78C6C;"> 5</span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;">time</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">Minute</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">defer</span><span style="color:#82AAFF;"> cancel</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">InstallPackage</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">ctx</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">large-package</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;"> npm</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">InstallOptions</span><span style="color:#89DDFF;">{})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="环境变量" tabindex="-1">环境变量 <a class="header-anchor" href="#环境变量" aria-label="Permalink to &quot;环境变量&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#FFCB6B;">github.com/scagogogo/go-npm-sdk/pkg/utils</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">executor </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> utils</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewExecutor</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">executor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">SetDefaultEnv</span><span style="color:#89DDFF;">(map[</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">string</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">NODE_ENV</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">production</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">NPM_CONFIG_REGISTRY</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">https://registry.npmjs.org/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="平台特定配置" tabindex="-1">平台特定配置 <a class="header-anchor" href="#平台特定配置" aria-label="Permalink to &quot;平台特定配置&quot;">​</a></h2><h3 id="windows配置" tabindex="-1">Windows配置 <a class="header-anchor" href="#windows配置" aria-label="Permalink to &quot;Windows配置&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Windows特定的npm路径</span></span>
<span class="line"><span style="color:#BABED8;">client</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> npm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewClientWithPath</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">C:</span><span style="color:#BABED8;">\\\\</span><span style="color:#C3E88D;">Program Files</span><span style="color:#BABED8;">\\\\</span><span style="color:#C3E88D;">nodejs</span><span style="color:#BABED8;">\\\\</span><span style="color:#C3E88D;">npm.cmd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="macos配置" tabindex="-1">macOS配置 <a class="header-anchor" href="#macos配置" aria-label="Permalink to &quot;macOS配置&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 使用Homebrew的macOS</span></span>
<span class="line"><span style="color:#BABED8;">client</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> npm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewClientWithPath</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/opt/homebrew/bin/npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="linux配置" tabindex="-1">Linux配置 <a class="header-anchor" href="#linux配置" aria-label="Permalink to &quot;Linux配置&quot;">​</a></h3><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Linux系统npm</span></span>
<span class="line"><span style="color:#BABED8;">client</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> err </span><span style="color:#89DDFF;">:=</span><span style="color:#BABED8;"> npm</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">NewClientWithPath</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/usr/bin/npm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to &quot;下一步&quot;">​</a></h2><ul><li><a href="./platform-support.html">平台支持</a> - 平台特定信息</li><li><a href="/zh/api/overview.html">API参考</a> - 完整API文档</li></ul>`,25)]))}const u=a(e,[["render",o]]);export{y as __pageData,u as default};
